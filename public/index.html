<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Bommariradio</title>
  <link rel="stylesheet" href="style.css">

</head>
<body>
  <audio  id="player" >
    <source src="asdf" type="audio/mpeg">
  No audio
  </audio>
	  <div>
    Now playing:<br>
    <span id="name">Song name goes here, you won't see this unless something is broken...<span>
	  </div>
 

	<script src="/socket.io/socket.io.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
	<script>
    play = true;
    document.getElementById("player").autoplay = true;
    var socket = io();

	  $(function () {


		socket.on('play', function(file, time){
      if (play){
        document.getElementById("player").src = file;
        document.getElementById("player").currentTime = time;
        document.getElementById("player").load();
        document.getElementById("name").innerHTML = file;

      }
		});

	  });

    function playStop(){
      if (document.getElementById("playButton").textContent == "Stop"){
        play = false;
        document.getElementById("playButton").textContent = "Play";
        document.getElementById("player").pause();
      }
      else {
        play = true;
        document.getElementById("playButton").textContent = "Stop";
        socket.emit('requestPlayBack');

      }

    }


  </script>


  <button id="playButton" type="button" onClick="playStop()">Stop</button>

</body>
</html>
